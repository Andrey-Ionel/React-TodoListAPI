(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{38:function(e,t,o){},39:function(e,t,o){},41:function(e,t,o){},42:function(e,t,o){},43:function(e,t,o){},45:function(e,t,o){"use strict";o.r(t);var n=o(0),c=o(18),s=o.n(c),l=(o(37),o(7)),d=(o(38),o(39),o(1));function i(e,t){var o=t.sendPostTodoAddRequest,c=Object(n.useState)(""),s=Object(l.a)(c,2),i=s[0],r=s[1];Object(n.useEffect)((function(){u.current&&u.current.focus()}),[]),Object(n.useEffect)((function(){i.trim()&&o(e)}),[]);var u=Object(n.useRef)(null);return Object(d.jsx)("input",{className:"new-todo",placeholder:"What needs to be done?",onChange:function(e){r(e.target.value)},onKeyPress:function(t){13===t.charCode&&i.trim()&&(e.onKeyPress({id:Date.now(),title:i,completed:!1}),r(""))},name:"text",value:i,ref:u})}function r(e){var t=e.completed,o=e.title,c=e.id,s=e.toggleTodo,i=e.removeTodo,r=e.updateTodo,u=e.sendPutTodoToggleRequest,a=e.sendPutTodoEditingRequest,f=e.sendDeleteTodoRequest,j=e.toggleCompletedTodos,h=Object(n.useRef)(),p=Object(n.useState)(o),m=Object(l.a)(p,2),b=m[0],g=m[1],O=Object(n.useState)(!1),T=Object(l.a)(O,2),x=T[0],C=T[1],v=t?"completed":"",y=x?"editing":"";return Object(n.useEffect)((function(){x&&h.current.focus()}),[x]),Object(n.useEffect)((function(){t!==t&&u(c,o,t)}),[t]),Object(n.useEffect)((function(){b!==b&&a(c,o,t)}),[b]),Object(n.useEffect)((function(){c!==c&&f(c)}),[c]),Object(d.jsxs)("li",{className:"".concat(v," ").concat(y),children:[Object(d.jsxs)("div",{className:"view",children:[Object(d.jsx)("input",{className:"toggle",type:"checkbox",checked:t,onChange:function(e){j&&e.preventDefault(),s(c,o,e.target.checked)}}),Object(d.jsx)("label",{onDoubleClick:function(){return C(!0)},children:o}),Object(d.jsx)("button",{type:"button",className:"destroy",onClick:function(e){e.target.classList.contains("destroy")&&i(c)}})]}),Object(d.jsx)("input",{ref:h,type:"text",className:"edit",onBlur:function(){C(!1),r(c,b,t)},value:b,onChange:function(e){g(e.target.value)}})]})}o(41);function u(e){var t=e.todos,o=e.toggleTodo,n=e.removeTodo,c=e.updateTodo,s=e.sendPutTodoToggleRequest,l=e.sendPutTodoEditingRequest,i=e.sendDeleteTodoRequest,u=e.toggleCompletedTodos;return Object(d.jsx)("ul",{className:"todo-list",children:t.map((function(e,t){return Object(d.jsx)(r,{id:e.id,title:e.title,completed:e.completed,toggleTodo:o,removeTodo:n,updateTodo:c,sendPutTodoToggleRequest:s,sendPutTodoEditingRequest:l,sendDeleteTodoRequest:i,toggleCompletedTodos:u},e.id)}))})}o(42);function a(e){var t=e.clearCompletedTodos,o=e.uncompletedTodosCount,c=e.filter,s=e.setFilter,l=e.hasCompleted,i=e.sendDeleteCompletedTodosRequest,r=function(e){e.target.classList.contains("clear-completed")&&t()};return Object(n.useEffect)((function(){!0===r&&i()}),[r]),Object(d.jsxs)("footer",{className:"footer",children:[Object(d.jsxs)("span",{className:"todo-count",children:[Object(d.jsxs)("strong",{children:[o," "]}),"items left"]}),Object(d.jsxs)("ul",{className:"filters",children:[Object(d.jsx)("li",{children:Object(d.jsx)("a",{href:"/",className:"all"===c?"selected":"",onClick:function(e){e.preventDefault(),s("all")},children:"All"})}),Object(d.jsx)("li",{children:Object(d.jsx)("a",{className:"active"===c?"selected":"",href:"/active",onClick:function(e){e.preventDefault(),s("active")},children:"Active"})}),Object(d.jsx)("li",{children:Object(d.jsx)("a",{className:"completed"===c?"selected":"",href:"/completed",onClick:function(e){e.preventDefault(),s("completed")},children:"Completed"})})]}),l&&Object(d.jsx)("button",{className:"clear-completed",onClick:r,children:"Clear completed"})]})}o(43);function f(e){var t=e.toggleCompletedTodos,o=e.isCompletedAll,c=e.sendPatchTodosToggleRequest,s=e.id,i=Object(n.useState)(o),r=Object(l.a)(i,2),u=r[0],a=r[1];return Object(n.useEffect)((function(){u!==u&&c(u,s)}),[u]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",checked:o,onChange:function(e){a(e.target.checked),t(e.target.checked)}}),Object(d.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"})]})}var j=o(48);function h(){var e=Object(n.useState)("all"),t=Object(l.a)(e,2),o=t[0],c=t[1],s=Object(n.useState)([]),r=Object(l.a)(s,2),h=r[0],p=r[1],m=Object(n.useState)(null),b=Object(l.a)(m,2),g=b[0],O=b[1],T=h.filter((function(e){return"active"===o?!e.completed:"completed"!==o||e.completed})),x=function(){return fetch("http://localhost:3000/todos?_sort=id&_order=DESC").then((function(e){return e.json()})).then((function(e){return p(e)}),(function(e){return O(e)}))};Object(n.useEffect)((function(){x()}),[]);var C=function(e){return fetch("http://localhost:3000/todos",{method:"POST",body:JSON.stringify({id:e.id,title:e.title,completed:e.completed}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()}))},v=function(e,t){return fetch("http://localhost:3000/todos/".concat(t),{method:"PATCH",body:JSON.stringify({completed:e}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()}))},y=function(e){h.map((function(t){return v(e,t.id)})),setTimeout(x,500)},E=function(e,t,o){return fetch("http://localhost:3000/todos/".concat(e),{method:"PUT",body:JSON.stringify({id:e,title:t,completed:o}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()}))},N=function(e){return fetch("http://localhost:3000/todos/".concat(e),{method:"DELETE"})},R=function(e,t,o){return fetch("http://localhost:3000/todos/".concat(e),{method:"PUT",body:JSON.stringify({id:e,title:t,completed:o}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()}))},P=h.reduce((function(e,t){return t.completed||e++,e++}),0),q=h.reduce((function(e,t){return t.completed&&e++,e}),0),k=h.length===q,D=q>0,S=function(e){return fetch("http://localhost:3000/todos/".concat(e),{method:"DELETE"})};return g?Object(d.jsx)(j.a,{message:"Error",description:"Server crashed or internet connection is lost.",type:"error",showIcon:!0}):Object(d.jsxs)("section",{className:"todoapp",children:[Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("h1",{children:"todos"}),Object(d.jsx)(i,{onKeyPress:function(e){C(e).then((function(){e.title.trim()&&x()}))},sendPostTodoAddRequest:C})]}),Object(d.jsxs)("section",{className:"main",children:[h.length>0&&Object(d.jsx)(f,{toggleCompletedTodos:y,isCompletedAll:k,sendPatchTodosToggleRequest:v}),Object(d.jsx)(u,{todos:T,toggleTodo:function(e,t,o){E(e,t,o).then((function(){return x()}))},removeTodo:function(e){N(e).then((function(){return x()}))},updateTodo:function(e,t,o){var n=R(e,t,o);t.trim()&&n.then((function(){return x()}))},sendPutTodoToggleRequest:E,sendPutTodoEditingRequest:R,sendDeleteTodoRequest:N,toggleCompletedTodos:y})]}),h.length>0&&Object(d.jsx)(a,{filter:o,setFilter:c,clearCompletedTodos:function(){h.filter((function(e){e.completed&&S(e.id)})),setTimeout(x,500)},uncompletedTodosCount:P,hasCompleted:D,sendDeleteCompletedTodosRequest:S})]})}var p=document.getElementById("root");s.a.render(Object(d.jsx)(n.StrictMode,{children:Object(d.jsx)(h,{})}),p)}},[[45,1,2]]]);
//# sourceMappingURL=main.b4fe80d0.chunk.js.map